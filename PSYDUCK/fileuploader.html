<body align=center>

<input type="file" id="uploader">
<input type="submit" value="invia" onclick="invia()">

<br><br>
<label for="nome">username: </label><input type="text" name="nome" id="nome"><br>
<label for="pswd">password: </label><input type="password" name="pswd" id="pswd">

<p id="res"></p>

<script src="jquery-2.0.0.js"></script>
<script>



function invia(){

	var file = document.getElementById("uploader").files[0];

	//file.name consente di estrarre il nome del file

	config = {
	
		url: 'https://96q0ylx1f2.execute-api.us-east-1.amazonaws.com/uploadfile',
		type: 'POST',
		data: file,
		beforeSend: function (xhr) {
			xhr.setRequestHeader ("Authorization",""+btoa($("#nome").value + ":" + $("#pswd").value));
			},
		crossDomain: true,
		dataType: 'text',
		processData: false,
		contentType: false,
		success: function(response){
		
					alert('file uploaded ')
				
				},
		
		error: function(jqXHR, textStatus, errorThrown){

				alert("errore: " + errorThrown + "-- status: " + textStatus )
			}
	}
		
	$.ajax(config);

}


</script>

</body>